<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>
</head>
<body>
<div id="TOC">
<ul>
<li><a href="#egov-testing-machine-manual">eGov Testing Machine Manual</a><ul>
<li><a href="#about-the-project">About the project</a></li>
<li><a href="#about-the-software">About the software</a></li>
<li><a href="#the-egov-testing-machine">The eGov Testing Machine</a></li>
<li><a href="#software-overview">Software Overview</a><ul>
<li><a href="#virtual-machine-manager-vmm">Virtual Machine Manager (VMM)</a></li>
<li><a href="#egov-manuals">eGov Manuals</a></li>
</ul></li>
</ul></li>
<li><a href="#features">Features</a><ul>
<li><a href="#virtual-machine-management">Virtual Machine Management</a></li>
</ul></li>
<li><a href="#communication">Communication</a><ul>
<li><a href="#reporting-bugs">Reporting bugs</a></li>
<li><a href="#getting-involved">Getting involved</a></li>
<li><a href="#mailing-list">Mailing list</a></li>
<li><a href="#home-page">Home page</a></li>
<li><a href="#social-media">Social media</a><ul>
<li><a href="#twitter">Twitter</a></li>
</ul></li>
</ul></li>
<li><a href="#installation">Installation</a><ul>
<li><a href="#software-requirement">Software requirement</a></li>
<li><a href="#supported-virtualization-software">Supported Virtualization software</a></li>
<li><a href="#downloading-virtual-machine-manager">Downloading Virtual Machine Manager</a><ul>
<li><a href="#via-git">Via git</a></li>
<li><a href="#via-a-dist-file-.tar.gz">Via a dist file (.tar.gz)</a></li>
</ul></li>
<li><a href="#building-and-installing-virtual-machine-manager">Building and installing Virtual Machine Manager</a></li>
<li><a href="#setup">Setup</a></li>
<li><a href="#creating-a-machine">Creating a machine</a></li>
<li><a href="#creating-a-client">Creating a client</a></li>
<li><a href="#create-a-client-configuration">Create a client configuration</a></li>
<li><a href="#example-of-a-client-configuration">Example of a client configuration:</a></li>
</ul></li>
<li><a href="#using-virtual-machine-manager">Using Virtual Machine Manager</a><ul>
<li><a href="#starting">Starting</a><ul>
<li><a href="#starting-with-guest-operating-system-visible">Starting with guest operating system visible</a></li>
<li><a href="#starting-without-showing-guest-operating-system-headless">Starting without showing guest operating system (headless)</a></li>
</ul></li>
<li><a href="#checking-status">Checking status</a></li>
<li><a href="#stopping">Stopping</a></li>
</ul></li>
<li><a href="#selenium">Selenium</a><ul>
<li><a href="#about-selenium">About Selenium</a></li>
<li><a href="#writing-selenium-tests">Writing Selenium tests</a></li>
</ul></li>
<li><a href="#miscallaneous-other-softwares">Miscallaneous other softwares</a><ul>
<li><a href="#sikuli">Sikuli</a></li>
<li><a href="#gnu-xnee">GNU Xnee</a></li>
<li><a href="#wmctrl">wmctrl</a></li>
</ul></li>
<li><a href="#launching-tests-using-vmm">Launching tests using VMM</a><ul>
<li><a href="#using-crontab">Using crontab</a></li>
<li><a href="#using-jenkins">Using Jenkins</a></li>
</ul></li>
<li><a href="#testing-egov-sites">Testing eGov sites</a><ul>
<li><a href="#problems-weve-encountered">Problems we’ve encountered</a><ul>
<li><a href="#logging-in-to-a-web-site-using-a-smart-card">Logging in to a web site using a smart card</a></li>
</ul></li>
<li><a href="#sikuli-1">Sikuli</a></li>
</ul></li>
<li><a href="#creating-virtual-machines">Creating virtual machines</a><ul>
<li><a href="#creating-a-virtualbox-machine-with-ubuntu-12.10">Creating a VirtualBox machine with Ubuntu 12.10</a><ul>
<li><a href="#name-and-operating-system">Name and operating system</a></li>
<li><a href="#memory-size">Memory size</a></li>
<li><a href="#hard-drive">Hard drive</a></li>
<li><a href="#hard-drive-file-type">Hard drive file type</a></li>
<li><a href="#storage-on-physical-hard-drive">Storage on physical hard drive</a></li>
<li><a href="#file-location-and-size">File location and size</a></li>
<li><a href="#network">Network</a></li>
<li><a href="#installing-ubuntu">Installing Ubuntu</a></li>
</ul></li>
</ul></li>
<li><a href="#example-use">Example use:</a></li>
<li><a href="#communication-1">Communication</a><ul>
<li><a href="#reporting-bugs-1">Reporting bugs</a></li>
<li><a href="#getting-involved-1">Getting involved</a></li>
<li><a href="#mailing-list-1">Mailing list</a></li>
<li><a href="#home-page-1">Home page</a></li>
<li><a href="#social-media-1">Social media</a><ul>
<li><a href="#twitter-1">Twitter</a></li>
</ul></li>
</ul></li>
<li><a href="#testing-machine-vmm-configuration">Testing Machine VMM configuration</a><ul>
<li><a href="#configuration-file-syntax">Configuration file syntax</a><ul>
<li><a href="#variables">Variables</a></li>
</ul></li>
</ul></li>
<li><a href="#tm-vmm-command-line-options">tm-vmm Command line options</a><ul>
<li><a href="#client-options">Client options</a></li>
<li><a href="#machine-options">Machine options</a></li>
</ul></li>
</ul>
</div>
<div class="figure">
<img src="pics/fscrs.png" />
</div>
<h1 id="egov-testing-machine-manual"><a href="#egov-testing-machine-manual">eGov Testing Machine Manual</a></h1>
<h2 id="about-the-project"><a href="#about-the-project">About the project</a></h2>
<p>The Autonomous Province of Bolzano currently offers important digital services (for eg, online applications to start businesses, pay property taxes and initiate e-Payments etc), the number is expected to increase as eGoverment services continue to grow.</p>
<p>The FSCRS project intends to contribute to the creation and improvement of eGovernment services through an innovative process that verifies and tests functionality. The underlying idea of the project is that the accessibility of digital public services is necessary to increase the innovation potential of the region. .</p>
<p>The project takes its name from the Free Software Client Reference System, a specific reference system (OS + defined set of software applications) that during testing simulates a user accessing the services.</p>
<h2 id="about-the-software"><a href="#about-the-software">About the software</a></h2>
<p>Testingmachine is used to test eGovernment services. The eGovernment services can vary from country to country but generally it grants citizens access to important documents and information. In most EU countries there are additional services like paying property tax that can be done online. Most governments in Europe are leaning in this direction in order to decrease administrative overhead.</p>
<p>Another challenge to overcome will be testing eGov services on mobile platforms, more specifially automating tests under Android. Good news is this is possible using Selenium. The one major obstacle that we face is getting around the smart card login. So far I am unaware of getting this to work under Android unless you patch the kernel and this is of course no an option. More documentation and research is needed concerning this.</p>
<h2 id="the-egov-testing-machine"><a href="#the-egov-testing-machine">The eGov Testing Machine</a></h2>
<p>The expected result is the development of a systematic, auto validation process, currently not available on the market, which allows the testing of eGovernment services without the manual intervention of an operator</p>
<p>The eGov Testing Machine can be thought of as a virtual group of people, sitting at the computer and using the eGov services and checking if they work properly, allowing the local Public Administration to test eGov services on a daily basis that are being offered to all citizens.</p>
<h2 id="software-overview"><a href="#software-overview">Software Overview</a></h2>
<p>The Testing Machine is currently made up by Virtual Machine Manager (tm-vmm) and documentation on how to wite, execute and automate tests of eGov sites in particular but also other softwares.</p>
<h3 id="virtual-machine-manager-vmm"><a href="#virtual-machine-manager-vmm">Virtual Machine Manager (VMM)</a></h3>
<p>tm-vmm is made up by bash scripts that let the user manage various virtual machine software in a general way. See the tm-vmm manual for more information.</p>
<h3 id="egov-manuals"><a href="#egov-manuals">eGov Manuals</a></h3>
<p>Writing tests of eGov sites is not hard but we believe that some help will still be useful for most people. The manuals and guides provided together with tm-vmm make it possible to test eGov sites automatically and unattended.</p>
<h1 id="features"><a href="#features">Features</a></h1>
<h2 id="virtual-machine-management"><a href="#virtual-machine-management">Virtual Machine Management</a></h2>
<p>With Testing Machine you can:</p>
<ul>
<li><p>start/pause/stop virtual machines</p></li>
<li><p>take screenshots of running virtual machines</p></li>
<li><p>execute commands in running virtual machines</p></li>
</ul>
<h1 id="communication"><a href="#communication">Communication</a></h1>
<h2 id="reporting-bugs"><a href="#reporting-bugs">Reporting bugs</a></h2>
<p>Try to be as precise as possible when reporting bugs. The more information we get the bigger chance we have of fixing the problem.</p>
<p>Use the mailing list below to report bugs.</p>
<h2 id="getting-involved"><a href="#getting-involved">Getting involved</a></h2>
<p><em>How to join:</em> clone the repo, try it out – join the mailing list :)</p>
<p>For more information read the developer guidelines.</p>
<h2 id="mailing-list"><a href="#mailing-list">Mailing list</a></h2>
<p>We have one mailing list for the project: <code>community@testingmachine.eu</code></p>
<p>Join this list here: <code>https://lists.testingmachine.eu/cgi-bin/mailman/listinfo/community</code></p>
<p>If you send emails to this list as a non subscriber chances are it will get list.</p>
<p>If you want to report a bug: * use a github account and add an issue * subscribe to the mailing and send the report to the list</p>
<h2 id="home-page"><a href="#home-page">Home page</a></h2>
<p>https://testingmachine.eu/</p>
<p>Source code is located here: <code>https://github.com/tis-innovation-park/vmm</code></p>
<h2 id="social-media"><a href="#social-media">Social media</a></h2>
<h3 id="twitter"><a href="#twitter">Twitter</a></h3>
<h1 id="installation"><a href="#installation">Installation</a></h1>
<h2 id="software-requirement"><a href="#software-requirement">Software requirement</a></h2>
<ul>
<li><p>ssh (client)</p></li>
<li><p>at least one virtualization software (see list of supported softwares below)</p></li>
<li><p>bash</p></li>
</ul>
<h2 id="supported-virtualization-software"><a href="#supported-virtualization-software">Supported Virtualization software</a></h2>
<ul>
<li><p>Virtualbox</p></li>
<li><p>qemu</p></li>
</ul>
<p>We’re looking into supporting: vmware,</p>
<h2 id="downloading-virtual-machine-manager"><a href="#downloading-virtual-machine-manager">Downloading Virtual Machine Manager</a></h2>
<h3 id="via-git"><a href="#via-git">Via git</a></h3>
<ul>
<li>Download git code</li>
</ul>
<p><code>git clone git://github.com/tis-innovation-park/vvm.git</code></p>
<h3 id="via-a-dist-file-.tar.gz"><a href="#via-a-dist-file-.tar.gz">Via a dist file (.tar.gz)</a></h3>
<p>Coming later</p>
<h2 id="building-and-installing-virtual-machine-manager"><a href="#building-and-installing-virtual-machine-manager">Building and installing Virtual Machine Manager</a></h2>
<ul>
<li>Go to the vvm directory</li>
</ul>
<p><code>cd vvm</code></p>
<ul>
<li>Configure the software</li>
</ul>
<p><code>./configure --prefix &lt;installationdir&gt;</code></p>
<ul>
<li>Build the software</li>
</ul>
<p><code>make</code></p>
<ul>
<li>Install the software</li>
</ul>
<p><code>sudo make install</code></p>
<ul>
<li>Verify the installation</li>
</ul>
<p><code>&lt;installationdir&gt;/bin/tm-vmm --list-clients</code></p>
<h2 id="setup"><a href="#setup">Setup</a></h2>
<ul>
<li>Create the directory $HOME/.testingmachine</li>
</ul>
<p><code>mkdir $HOME/.testingmachine</code></p>
<ul>
<li>Create tm-vmm.conf in .testingmachine, typically with your favorite editor (emacs?)</li>
</ul>
<p><code>emacs ~/.testingmachine/tm-vmm.conf</code></p>
<p>In this file you can configure settings you want to use as default in your clients. It is perfectly possible to override these settings in your individual client configurations.</p>
<p>For a list of variables, see section Configuration syntax below.</p>
<h2 id="creating-a-machine"><a href="#creating-a-machine">Creating a machine</a></h2>
<p>To create a machine vvm relies on the virtualization software. So if you want to manage a Virtualbox machine you (at least for now) create it with Virtualbox. For information about how to do this, read the chapter “Creating a Virtualbox machine”.</p>
<h2 id="creating-a-client"><a href="#creating-a-client">Creating a client</a></h2>
<p>First of all you need to decide what machine you want to use with your client. In the example below we will assume it is called Debian6.0</p>
<ul>
<li>Create a directory for all clients:</li>
</ul>
<p><code>mkdir ~/.testingmachine/clients</code></p>
<h2 id="create-a-client-configuration"><a href="#create-a-client-configuration">Create a client configuration</a></h2>
<p>You can create client configuration in two different ways:</p>
<ul>
<li><p>Manually create a configuration file for the client (using a virtual machine):</p>
<p>[CLIENT NAME].conf</p>
<ul>
<li>Set the variables as you find suitable for your project.</li>
</ul></li>
<li><p>Use the command line option:</p>
<p><code>--create-client-conf</code></p></li>
</ul>
<p>Example usage of the option.</p>
<pre><code>`tm-vmm --create-client-conf  Debian-6.0`</code></pre>
<h2 id="example-of-a-client-configuration"><a href="#example-of-a-client-configuration">Example of a client configuration:</a></h2>
<p><code>VM_NAME=Debian6.0</code> <code>VM_TYPE=&quot;VirtualBox&quot;</code> <code>VM_IP_ADDRESS=192.168.1.2</code> <code>VM_USER=$USER</code> <code>VM_SUPERUSER=root</code> <code>SSH_PORT=22</code> <code>SSH_SHUTDOWN_COMMAND=&quot;shutdown -h now&quot;</code></p>
<p>For more variables see section Configuration syntax below</p>
<ul>
<li>Copy the public ssh key to the machine, e.g</li>
</ul>
<p><code>ssh-copy-id 192.168.1.2</code></p>
<h1 id="using-virtual-machine-manager"><a href="#using-virtual-machine-manager">Using Virtual Machine Manager</a></h1>
<p>Regardless of the underlying virtual machine you manage the machine in one way. We provide the most basic uses of tm-vmm here and encourage you to read the complete list of command line options in the last section of the manual.</p>
<h2 id="starting"><a href="#starting">Starting</a></h2>
<h3 id="starting-with-guest-operating-system-visible"><a href="#starting-with-guest-operating-system-visible">Starting with guest operating system visible</a></h3>
<p><code>tm-vmm --start-client &lt;CLIENTNAME&gt;</code></p>
<p>Example:</p>
<p><code>tm-vmm --start-client Ubuntu-10</code></p>
<h3 id="starting-without-showing-guest-operating-system-headless"><a href="#starting-without-showing-guest-operating-system-headless">Starting without showing guest operating system (headless)</a></h3>
<p><code>tm-vmm --start-client-headless &lt;CLIENTNAME&gt;</code></p>
<p>Example:</p>
<p><code>tm-vmm --start-client-headless Ubuntu-10</code></p>
<h2 id="checking-status"><a href="#checking-status">Checking status</a></h2>
<p><code>tm-vmm --check-client-status &lt;CLIENTNAME&gt;</code></p>
<p>Example:</p>
<p><code>tm-vmm --check-client-status Ubuntu-10</code></p>
<h2 id="stopping"><a href="#stopping">Stopping</a></h2>
<p><code>tm-vmm --stop-client &lt;CLIENTNAME&gt;</code></p>
<p>Example:</p>
<p><code>tm-vmm --stop-client Ubuntu-10</code></p>
<h1 id="selenium"><a href="#selenium">Selenium</a></h1>
<h2 id="about-selenium"><a href="#about-selenium">About Selenium</a></h2>
<p><em>Selenium is a portable software testing framework for web applications. Selenium provides a record/playback tool for authoring tests without learning a test scripting language (Selenium IDE). It also provides a test domain-specific language (Selenese) [1] to write tests in a number of popular programming languages, including Java, C#, Groovy, Perl, PHP, Python and Ruby. The tests can then be run against most modern web browsers. Selenium deploys on Windows, Linux, and Macintosh platforms.</em></p>
<p>This text is quoted from: http://en.wikipedia.org/wiki/Selenium_(software)</p>
<p>Selenium is run on the guest so some tweaks are needed to get things working, but don’t worry we’ve done almost everything for you.</p>
<h2 id="writing-selenium-tests"><a href="#writing-selenium-tests">Writing Selenium tests</a></h2>
<h1 id="miscallaneous-other-softwares"><a href="#miscallaneous-other-softwares">Miscallaneous other softwares</a></h1>
<h2 id="sikuli"><a href="#sikuli">Sikuli</a></h2>
<p>Installing Java is a prerequisite for running Sikuli. Install it with apt-get:</p>
<p><code>sudo apt-get install openjdk-6-jdk</code></p>
<p>The software can be installed on Ubuntu 12.04 LTS with the following command:</p>
<p><code>sudo apt-get install sikuli</code></p>
<h2 id="gnu-xnee"><a href="#gnu-xnee">GNU Xnee</a></h2>
<h2 id="wmctrl"><a href="#wmctrl">wmctrl</a></h2>
<p>The package “wmctrl” is used to resize windows.</p>
<p><code>sudo apt-get install wmctrl</code></p>
<h1 id="launching-tests-using-vmm"><a href="#launching-tests-using-vmm">Launching tests using VMM</a></h1>
<h2 id="using-crontab"><a href="#using-crontab">Using crontab</a></h2>
<h2 id="using-jenkins"><a href="#using-jenkins">Using Jenkins</a></h2>
<h1 id="testing-egov-sites"><a href="#testing-egov-sites">Testing eGov sites</a></h1>
<h2 id="problems-weve-encountered"><a href="#problems-weve-encountered">Problems we’ve encountered</a></h2>
<h3 id="logging-in-to-a-web-site-using-a-smart-card"><a href="#logging-in-to-a-web-site-using-a-smart-card">Logging in to a web site using a smart card</a></h3>
<p>When setting up the Testingmachine in South Tyrol to test the <em>burger card</em> the biggest obstacle we had to overcome was the login process. Since this is done using a smart card and a pin we found no way to do this using Selenium and so Sikuli was used. Once logged in, Selenium can be used to test the web services.</p>
<p>Getting Sikuli to perform an automatic login can be done in the following way:</p>
<h2 id="sikuli-1"><a href="#sikuli-1">Sikuli</a></h2>
<p>In order to use Sikuli a test case has to be made. This is done within Sikuli to emulate the login process step by step. A possible test case could look like this:</p>
<pre class="sourceCode python"><code class="sourceCode python">wait(<span class="st">&quot;KJ2.png&quot;</span>,<span class="dv">60</span>)
click(<span class="st">&quot;1352889207953.png&quot;</span>)
sleep(<span class="dv">5</span>)
wait(<span class="st">&quot;Pleaseentert.png&quot;</span>,<span class="dv">60</span>)
click(<span class="st">&quot;Pleaseentert-1.png&quot;</span>)
<span class="dt">type</span>(<span class="st">&quot;96414648&quot;</span>)
sleep(<span class="dv">1</span>)
click(<span class="st">&quot;OK.png&quot;</span>)
sleep(<span class="dv">2</span>)
wait(<span class="st">&quot;Thlssltehasr.png&quot;</span>,<span class="dv">60</span>)
click(<span class="st">&quot;1352890307684.png&quot;</span>)
sleep(<span class="dv">2</span>)
wait(<span class="st">&quot;Tl2fIlHlKJlI.png&quot;</span>,<span class="dv">60</span>)</code></pre>
<p>The .png files are created with Sikuli. When running Sikuli you can take ‘snapshots’ of certain parts of the screen that are captured and later used as a reference point where to perform certain functions like emulating button presses or entering text. Sikuli then ‘looks’ for parts of the screen that matches the ‘snapshots’ before it performs actions. This works well with web pages since Sikuli can wait until a page has loaded before executing a command.</p>
<p><strong>Note:</strong> *We’ve also written some words on how to setup smart cards. See *</p>
<h1 id="creating-virtual-machines"><a href="#creating-virtual-machines">Creating virtual machines</a></h1>
<h2 id="creating-a-virtualbox-machine-with-ubuntu-12.10"><a href="#creating-a-virtualbox-machine-with-ubuntu-12.10">Creating a VirtualBox machine with Ubuntu 12.10</a></h2>
<p>Basically you should follow the normal procedure, as described in the VirtualBox manual, on how to create a new virtual machine. However we provide a guide below to make this easier. You can choose to use our settings or change some at your will.</p>
<p><strong>Note:</strong> <em>If you’re on a Ubuntu system you might have to add your user to the vboxusers group.</em></p>
<h3 id="name-and-operating-system"><a href="#name-and-operating-system">Name and operating system</a></h3>
<ul>
<li>Name: eGov testing machine</li>
<li>Type: Linux</li>
<li>Version: Ubuntu (64 bit)</li>
</ul>
<p>[Name and os] (screenshots/name-and-operating-system.png “Name and operating system”)</p>
<h3 id="memory-size"><a href="#memory-size">Memory size</a></h3>
<ul>
<li>2048 MB</li>
</ul>
<div class="figure">
<img src="screenshots/memory-size.png" alt="Memory size" /><p class="caption">Memory size</p>
</div>
<h3 id="hard-drive"><a href="#hard-drive">Hard drive</a></h3>
<ul>
<li>Choose to create a virtual hard drive now</li>
</ul>
<div class="figure">
<img src="screenshots/hard-drive.png" alt="Hard drive" /><p class="caption">Hard drive</p>
</div>
<h3 id="hard-drive-file-type"><a href="#hard-drive-file-type">Hard drive file type</a></h3>
<ul>
<li>Choose VDI</li>
</ul>
<div class="figure">
<img src="screenshots/hard-drive-file-type.png" alt="Hard drive file type" /><p class="caption">Hard drive file type</p>
</div>
<h3 id="storage-on-physical-hard-drive"><a href="#storage-on-physical-hard-drive">Storage on physical hard drive</a></h3>
<ul>
<li>Choose Dynamically allocated</li>
</ul>
<div class="figure">
<img src="screenshots/storage-on-physical-hard-disk.png" alt="Hard drive file type" /><p class="caption">Hard drive file type</p>
</div>
<h3 id="file-location-and-size"><a href="#file-location-and-size">File location and size</a></h3>
<ul>
<li>8 GB should be enough</li>
</ul>
<div class="figure">
<img src="screenshots/file-location-and-size.png" alt="File location and size" /><p class="caption">File location and size</p>
</div>
<p>Your disk has now been created. Before starting it we need to do some additional settings.</p>
<h3 id="network"><a href="#network">Network</a></h3>
<h4 id="setup-the-network-card"><a href="#setup-the-network-card">Setup the network card</a></h4>
<ul>
<li>Open up the VirtualBox Manager</li>
<li>Choose your Virtual machine and click Settings</li>
<li>Make sure Network Adapter 1 is enabled.</li>
</ul>
<p>The following settings should be applied to Adapter 1.</p>
<p><strong>Attached to</strong>: NAT (previously Bridged adaptor was advised)</p>
<ul>
<li><strong>Name</strong>: eth0</li>
<li><strong>Advanced</strong>:<br /></li>
<li><strong>Adapter type</strong>: Intel PRO/1000 MT Desktop (…)</li>
<li><strong>Promiscuous mode</strong>: Deny</li>
<li><strong>MAC Address</strong>: use the suggested</li>
<li><strong>Cable connected</strong>: should be checked</li>
</ul>
<p><em>This gives your virtual machine an IP address on the same subnet as the host computer. See http://www.virtualbox.org/manual/ Chapter 6 for additional information on bridged networking.</em></p>
<div class="figure">
<img src="screenshots/network-1.png" alt="Network" /><p class="caption">Network</p>
</div>
<h5 id="allowing-ssh-logins-to-your-virtual-machine"><a href="#allowing-ssh-logins-to-your-virtual-machine">Allowing SSH logins to your virtual machine</a></h5>
<p>Open up the VirtualBox Manager</p>
<p>Choose your Virtual machine and click Settings</p>
<p>Choose Port forwarding</p>
<p>Add a new rule by clicking the + sign. Enter</p>
<ul>
<li><strong>Rule</strong>: ssh</li>
<li><strong>Protocol</strong>: TCP</li>
<li><strong>Host IP</strong>:</li>
<li><strong>Host Port</strong>: 2256   (the value can basically be any free port on your host computer)</li>
<li><strong>Guest IP</strong>:</li>
<li><strong>Guest Port</strong>: 22</li>
</ul>
<div class="figure">
<img src="screenshots/network-port-forward.png" alt="Network" /><p class="caption">Network</p>
</div>
<h4 id="usb"><a href="#usb">USB</a></h4>
<p>Make sure USB is enabled if you plan to use a smart card reader or another USB device</p>
<p>To use a smart card reader in your virtual machine you have to do the following:</p>
<ul>
<li>Attach the smart card reader to your computer</li>
<li>Add Filter from Device (Alt + Ins) and choose the device that is attached to the physical machine.</li>
<li>The same procedure applies to other peripherals, like a USB storage device.</li>
</ul>
<p>See http://www.virtualbox.org/manual/ Chapter 3 for additional information</p>
<h3 id="installing-ubuntu"><a href="#installing-ubuntu">Installing Ubuntu</a></h3>
<p>Download the preferred Ubuntu iso image from ubuntu.com</p>
<p>Click Settings and choose storage.</p>
<p>Add the downloaded iso image to the virtual machine as a CD-ROM by clicking the Empty icon (image missing) under Controller: IDE and then click on the disc icon right of the text CD/DVD Drive: .</p>
<div class="figure">
<img src="screenshots/storage-pre.png" alt="Storage" /><p class="caption">Storage</p>
</div>
<p>Choose a virtual CD/DVD disk file … and point out the downloaded iso image (e.g. ubuntu-12.10-desktop-amd64.iso).</p>
<div class="figure">
<img src="screenshots/storage-post.png" alt="Storage" /><p class="caption">Storage</p>
</div>
<p>Click Start</p>
<p>Follow the installation instructions to install Ubuntu in your new virtual machine.</p>
<h4 id="upgrading-your-installation"><a href="#upgrading-your-installation">Upgrading your installation</a></h4>
<p>To upgrade your system you need to:</p>
<ul>
<li>Click on the Software updater icon to your left</li>
<li>Click install now</li>
<li>Enter password</li>
</ul>
<h4 id="installing-necessary-tools-in-your-virtual-machine"><a href="#installing-necessary-tools-in-your-virtual-machine">Installing necessary tools in your virtual machine</a></h4>
<p>The following tools need to be installed on your virtual machine</p>
<ul>
<li>openssh-server</li>
</ul>
<p>Install them by typing the following command in a terminal window, assuming you’re logged in as your first user (created during the Ubuntu installation):</p>
<p>sudo apt-get install openssh-server</p>
<h4 id="setting-up-users-on-the-virtual-machine"><a href="#setting-up-users-on-the-virtual-machine">Setting up users on the virtual machine</a></h4>
<p>Log in to your virtual machine as the user you created during installation.</p>
<h5 id="setting-up-the-root-account"><a href="#setting-up-the-root-account">Setting up the root account</a></h5>
<ul>
<li>Permit root to login via the ssh server.</li>
<li>Launch a terminal window</li>
<li>Open up the ssh server configuration file</li>
</ul>
<p><code>sudo gedit /etc/ssh/sshd_config</code></p>
<ul>
<li>Make sure that PermitRootLogin is set to yes</li>
<li>Restart the ssh server</li>
</ul>
<p><code>sudo /etc/init.d/ssh restart</code></p>
<ul>
<li>Add the ssh key of your host user to the root account</li>
</ul>
<p>TODO: what IP does the client/guest get??</p>
<h5 id="setting-up-a-new-user"><a href="#setting-up-a-new-user">Setting up a new user</a></h5>
<p>VMM puts no restrictions or requirements on the name of the user in your virtual machine. The user name “egov-tester” is given here as an example and will be used in all manual text below.</p>
<p>Log in as the user you created during the Ubuntu installation.</p>
<p>Open up a user management tool by pressing the dasher (logo missing) and type user accounts.</p>
<ul>
<li><p>Press the unlock symbol and type in the password of the first user you created.</p></li>
<li><p>Press the + symbol. You will now see a new window, called Create new account, in which you should fill in:</p></li>
</ul>
<p><strong>Account Type</strong>: Standard <strong>Full name</strong>: E-goc tester <strong>Username</strong> egov</p>
<ul>
<li>Click on Enable password and type in a password.</li>
</ul>
<h1 id="example-use"><a href="#example-use">Example use:</a></h1>
<p>/opt/bin/tm-vmm –check-client-status Ubuntu-12.10</p>
<p>/opt/bin/tm-vmm –check-client-status Ubuntu-12.10</p>
<p>/opt/bin/tm-vmm –check-client-ssh Ubuntu-12.10</p>
<p>/opt/bin/tm-vmm –client-exec Ubuntu-12.10 “pkcs15-tool -L”</p>
<h1 id="communication-1"><a href="#communication-1">Communication</a></h1>
<h2 id="reporting-bugs-1"><a href="#reporting-bugs-1">Reporting bugs</a></h2>
<p>Try to be as precise as possible when reporting bugs. The more information we get the bigger chance we have of fixing the problem.</p>
<p>Use the mailing list below to report bugs.</p>
<h2 id="getting-involved-1"><a href="#getting-involved-1">Getting involved</a></h2>
<p><em>How to join:</em> clone the repo, try it out – join the mailing list :)</p>
<p>For more information read the developer guidelines.</p>
<h2 id="mailing-list-1"><a href="#mailing-list-1">Mailing list</a></h2>
<p>We have one mailing list for the project: <code>community@testingmachine.eu</code></p>
<p>Join this list here: <code>https://lists.testingmachine.eu/cgi-bin/mailman/listinfo/community</code></p>
<p>If you send emails to this list as a non subscriber chances are it will get list.</p>
<p>If you want to report a bug: * use a github account and add an issue * subscribe to the mailing and send the report to the list</p>
<h2 id="home-page-1"><a href="#home-page-1">Home page</a></h2>
<p>https://testingmachine.eu/</p>
<p>Source code is located here: <code>https://github.com/tis-innovation-park/vmm</code></p>
<h2 id="social-media-1"><a href="#social-media-1">Social media</a></h2>
<h3 id="twitter-1"><a href="#twitter-1">Twitter</a></h3>
<h1 id="testing-machine-vmm-configuration"><a href="#testing-machine-vmm-configuration">Testing Machine VMM configuration</a></h1>
<h2 id="configuration-file-syntax"><a href="#configuration-file-syntax">Configuration file syntax</a></h2>
<p>The syntax for setting a variable is the same as in bash scrips (no coincidence!). Basically you write:</p>
<p><code>VARIABLE=VALUE</code></p>
<h3 id="variables"><a href="#variables">Variables</a></h3>
<p><code>LOG_FILE_DIR=/tmp/vmm/log</code> - sets the log file base directory to /tmp/vmm/log. This means that all logs can be found here.</p>
<p><code>VM_STARTUP_TIMEOUT=10</code> - the time to wait for a virtual machine to start up before considering it to be ‘dead’.</p>
<p><code>VM_STOP_TIMEOUT=20</code> - the time to wait for a virtual machine to start up before taking more drastic actions to take down the machine. Ultimately VVM will take down a machine with a <code>kill</code>.</p>
<p><code>SSH=ssh</code> - the SSH program to use</p>
<p><code>SSH_TEST_OPTIONS=&quot; -o connectTimeout=3&quot;</code> - the options to pass to the SSH program (see SSH variable above) when testing of the machine is up (or not).</p>
<p><code>VM_NAME=&quot;Debian6.0&quot;</code> - the name of the machine to use in this client. It is important that your Virtualization software can find this machine.</p>
<p><code>VM_TYPE=&quot;VirtualBox&quot;</code> - what type of Virtulization software this machine belongs to. Currently you can use: VirtualBox and qemu</p>
<p><code>VM_IP_ADDRESS=192.168.x.x</code> - the IP address of the virtual machine</p>
<p><code>VM_USER=$USER</code> - the user you want to use when accessing the virtual machine</p>
<p><code>VM_SUPERUSER=root</code> - the name of the super user/administrator account, typically used to reboot the machine</p>
<p><code>SSH_PORT=22</code> - the port where the SSH server is running on the client</p>
<p><code>SSH_SHUTDOWN_COMMAND=&quot;shutdown -h now&quot;</code> - VVM will do its very best to shut down a machine as gracefully as possible. One way to do this is to try to shut it down using SSH. The command in this variable will be used to do that.</p>
<h1 id="tm-vmm-command-line-options"><a href="#tm-vmm-command-line-options">tm-vmm Command line options</a></h1>
<h2 id="client-options"><a href="#client-options">Client options</a></h2>
<p><code>--list-clients</code> - lists all configured clients</p>
<p><code>--start-clients client</code> - starts client</p>
<p><code>--start-client-headless CLIENT_NAME</code> - Start client called CLIENT_NAME as headless (no screen)</p>
<p><code>--stop-clients client</code> - stops client</p>
<p><code>--list-running-clients</code> - Lists all clients currently running</p>
<p><code>--check-client-ssh</code> - Checks if ssh is up on client</p>
<p><code>--check-client-status</code> - Checks if clients is up and running</p>
<p><code>--client-exec CLIENT cmd</code> - Execeute cmd on client</p>
<p><code>--client-exec-as-root</code> - Execeute cmd on client as root</p>
<p><code>--client-x11 CLIENT</code> - Checks if X11 is up and running on CLIENT</p>
<p><code>--client-screenshot CLIENT</code> - Take a screenshot on CLIENT (not 100% ready)</p>
<p><code>--print-client CLIENT</code> - Print the configuration for CLIENT</p>
<p><code>--wait-for-ssh CLIENT</code> - Wait until ssh is up and running on CLIENT</p>
<p><code>--open-ssh CLIENT</code> - Open an interactive shell (using ssh) on CLIENT</p>
<p><code>--check-client-online CLIENT</code> - Check if CLIENT can ping the outside world</p>
<h2 id="machine-options"><a href="#machine-options">Machine options</a></h2>
<p><code>--list-machines</code> - lists all machines known to VVM</p>
<p><code>--start-machine client</code> - starts machine</p>
<p><code>--start-machine-headless VM_NAME</code> - Start machine called VM_NAME as headless (no screen)</p>
<p><code>--stop-machine client</code> - stops machine</p>
<p><code>--check-machine</code></p>
<p><code>--stop-client CLIENT_NAME</code> - Stop client called CLIENT_NAME</p>
<p><code>--stop-machine VM_NAME</code> - Stop machine called VM_NAME</p>
</body>
</html>
